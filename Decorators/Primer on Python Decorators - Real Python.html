<!DOCTYPE html>
<!-- saved from url=(0063)https://realpython.com/blog/python/primer-on-python-decorators/ -->
<html class=" js video" lang="en"><!--<![endif]--><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  
  <title>Primer on Python Decorators - Real Python</title>
  <meta name="author" content="Real Python">

  <meta name="description" content="In this introductory tutorial, we&#39;ll look at what decorators are and how to create and use them.">
  <meta name="keywords" content="python, fundamentals, decorators, nested functions, decorator pattern">

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="https://realpython.com/blog/python/primer-on-python-decorators">
  <link href="https://realpython.com/favicon.ico" rel="icon">
  <link href="https://realpython.com/atom.xml" rel="alternate" title="Real Python" type="application/atom+xml">

  <link href="./Primer on Python Decorators - Real Python_files/bootstrap.min.css" rel="stylesheet">
<!-- <link href="/stylesheets/bootstrap.min.css" rel="stylesheet"> -->
<!-- <link href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"> -->
<link rel="stylesheet" href="./Primer on Python Decorators - Real Python_files/font-awesome.min.css">
<link href="./Primer on Python Decorators - Real Python_files/screen.css" media="screen, projection" rel="stylesheet" type="text/css">




  <script src="./Primer on Python Decorators - Real Python_files/cb=gapi.loaded_0" async=""></script><script type="text/javascript" async="" src="./Primer on Python Decorators - Real Python_files/plusone.js" gapi_processed="true"></script><script id="facebook-jssdk" async="" src="./Primer on Python Decorators - Real Python_files/all.js"></script><script type="text/javascript" async="" src="https://cdn.mxpnl.com/libs/mixpanel-2.2.min.js"></script><script async="" src="https://www.google-analytics.com/analytics.js"></script><script src="./Primer on Python Decorators - Real Python_files/jquery-2.0.3.min.js"></script>
  <script src="./Primer on Python Decorators - Real Python_files/jquery.tableofcontents.min.js" type="text/javascript"></script>
  <script src="./Primer on Python Decorators - Real Python_files/generate-toc.js" type="text/javascript"></script>
  <script src="./Primer on Python Decorators - Real Python_files/main.js" type="text/javascript"></script>

  <!-- toc -->
  
    <script type="text/javascript">
      jQuery(document).ready(function() {

        // Put a TOC right before the entry content.
        generateTOC('.side-content', 'Page Contents');

      if ($(window).width() > 992) {

        // Add scroll to TOC
        var $obj = $('#tocBlock');
        var top = $obj.offset().top - parseFloat($obj.css('marginTop').replace(/auto/, 0));

        $(window).scroll(function (event) {
          // what the y position of the scroll is
          var y = $(this).scrollTop();

          // whether that's below the form
          if (y >= top - 51) {
            // if so, ad the fixed class
            $obj.css('position','fixed').css('top', '45px');
          } else {
            // otherwise remove it
            $obj.css('position','static').css('top', '0px');
          }
        });

      }

      });
    </script>
  

  
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-35184939-1', 'auto');
  ga('send', 'pageview');
  ga('require', 'ecommerce');
</script>

  <!-- start Mixpanel --><script type="text/javascript">(function(f,b){if(!b.__SV){var a,e,i,g;window.mixpanel=b;b._i=[];b.init=function(a,e,d){function f(b,h){var a=h.split(".");2==a.length&&(b=b[a[0]],h=a[1]);b[h]=function(){b.push([h].concat(Array.prototype.slice.call(arguments,0)))}}var c=b;"undefined"!==typeof d?c=b[d]=[]:d="mixpanel";c.people=c.people||[];c.toString=function(b){var a="mixpanel";"mixpanel"!==d&&(a+="."+d);b||(a+=" (stub)");return a};c.people.toString=function(){return c.toString(1)+".people (stub)"};i="disable track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config people.set people.set_once people.increment people.append people.track_charge people.clear_charges people.delete_user".split(" ");
for(g=0;g<i.length;g++)f(c,i[g]);b._i.push([a,e,d])};b.__SV=1.2;a=f.createElement("script");a.type="text/javascript";a.async=!0;a.src="//cdn.mxpnl.com/libs/mixpanel-2.2.min.js";e=f.getElementsByTagName("script")[0];e.parentNode.insertBefore(a,e)}})(document,window.mixpanel||[]);
mixpanel.init("e4dec2183f03da36bab8f4b71cc19a55");</script><!-- end Mixpanel -->
<script type="text/javascript" async="" src="./Primer on Python Decorators - Real Python_files/embed.js"></script><script type="text/javascript" async="" src="./Primer on Python Decorators - Real Python_files/widgets.js"></script><link href="./Primer on Python Decorators - Real Python_files/simple-goods.css" type="text/css" rel="stylesheet"><style type="text/css">.fb_hidden{position:absolute;top:-10000px;z-index:10001}.fb_reposition{overflow:hidden;position:relative}.fb_invisible{display:none}.fb_reset{background:none;border:0;border-spacing:0;color:#000;cursor:auto;direction:ltr;font-family:"lucida grande", tahoma, verdana, arial, sans-serif;font-size:11px;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:1;margin:0;overflow:visible;padding:0;text-align:left;text-decoration:none;text-indent:0;text-shadow:none;text-transform:none;visibility:visible;white-space:normal;word-spacing:normal}.fb_reset>div{overflow:hidden}.fb_link img{border:none}@keyframes fb_transform{from{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}.fb_animate{animation:fb_transform .3s forwards}
.fb_dialog{background:rgba(82, 82, 82, .7);position:absolute;top:-10000px;z-index:10001}.fb_reset .fb_dialog_legacy{overflow:visible}.fb_dialog_advanced{padding:10px;-moz-border-radius:8px;-webkit-border-radius:8px;border-radius:8px}.fb_dialog_content{background:#fff;color:#333}.fb_dialog_close_icon{background:url(https://static.xx.fbcdn.net/rsrc.php/v2/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 0 transparent;_background-image:url(https://static.xx.fbcdn.net/rsrc.php/v2/yL/r/s816eWC-2sl.gif);cursor:pointer;display:block;height:15px;position:absolute;right:18px;top:17px;width:15px}.fb_dialog_mobile .fb_dialog_close_icon{top:5px;left:5px;right:auto}.fb_dialog_padding{background-color:transparent;position:absolute;width:1px;z-index:-1}.fb_dialog_close_icon:hover{background:url(https://static.xx.fbcdn.net/rsrc.php/v2/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 -15px transparent;_background-image:url(https://static.xx.fbcdn.net/rsrc.php/v2/yL/r/s816eWC-2sl.gif)}.fb_dialog_close_icon:active{background:url(https://static.xx.fbcdn.net/rsrc.php/v2/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 -30px transparent;_background-image:url(https://static.xx.fbcdn.net/rsrc.php/v2/yL/r/s816eWC-2sl.gif)}.fb_dialog_loader{background-color:#f6f7f9;border:1px solid #606060;font-size:24px;padding:20px}.fb_dialog_top_left,.fb_dialog_top_right,.fb_dialog_bottom_left,.fb_dialog_bottom_right{height:10px;width:10px;overflow:hidden;position:absolute}.fb_dialog_top_left{background:url(https://static.xx.fbcdn.net/rsrc.php/v2/ye/r/8YeTNIlTZjm.png) no-repeat 0 0;left:-10px;top:-10px}.fb_dialog_top_right{background:url(https://static.xx.fbcdn.net/rsrc.php/v2/ye/r/8YeTNIlTZjm.png) no-repeat 0 -10px;right:-10px;top:-10px}.fb_dialog_bottom_left{background:url(https://static.xx.fbcdn.net/rsrc.php/v2/ye/r/8YeTNIlTZjm.png) no-repeat 0 -20px;bottom:-10px;left:-10px}.fb_dialog_bottom_right{background:url(https://static.xx.fbcdn.net/rsrc.php/v2/ye/r/8YeTNIlTZjm.png) no-repeat 0 -30px;right:-10px;bottom:-10px}.fb_dialog_vert_left,.fb_dialog_vert_right,.fb_dialog_horiz_top,.fb_dialog_horiz_bottom{position:absolute;background:#525252;filter:alpha(opacity=70);opacity:.7}.fb_dialog_vert_left,.fb_dialog_vert_right{width:10px;height:100%}.fb_dialog_vert_left{margin-left:-10px}.fb_dialog_vert_right{right:0;margin-right:-10px}.fb_dialog_horiz_top,.fb_dialog_horiz_bottom{width:100%;height:10px}.fb_dialog_horiz_top{margin-top:-10px}.fb_dialog_horiz_bottom{bottom:0;margin-bottom:-10px}.fb_dialog_iframe{line-height:0}.fb_dialog_content .dialog_title{background:#6d84b4;border:1px solid #365899;color:#fff;font-size:14px;font-weight:bold;margin:0}.fb_dialog_content .dialog_title>span{background:url(https://static.xx.fbcdn.net/rsrc.php/v2/yd/r/Cou7n-nqK52.gif) no-repeat 5px 50%;float:left;padding:5px 0 7px 26px}body.fb_hidden{-webkit-transform:none;height:100%;margin:0;overflow:visible;position:absolute;top:-10000px;left:0;width:100%}.fb_dialog.fb_dialog_mobile.loading{background:url(https://static.xx.fbcdn.net/rsrc.php/v2/ya/r/3rhSv5V8j3o.gif) white no-repeat 50% 50%;min-height:100%;min-width:100%;overflow:hidden;position:absolute;top:0;z-index:10001}.fb_dialog.fb_dialog_mobile.loading.centered{width:auto;height:auto;min-height:initial;min-width:initial;background:none}.fb_dialog.fb_dialog_mobile.loading.centered #fb_dialog_loader_spinner{width:100%}.fb_dialog.fb_dialog_mobile.loading.centered .fb_dialog_content{background:none}.loading.centered #fb_dialog_loader_close{color:#fff;display:block;padding-top:20px;clear:both;font-size:18px}#fb-root #fb_dialog_ipad_overlay{background:rgba(0, 0, 0, .45);position:absolute;bottom:0;left:0;right:0;top:0;width:100%;min-height:100%;z-index:10000}#fb-root #fb_dialog_ipad_overlay.hidden{display:none}.fb_dialog.fb_dialog_mobile.loading iframe{visibility:hidden}.fb_dialog_content .dialog_header{-webkit-box-shadow:white 0 1px 1px -1px inset;background:-webkit-gradient(linear, 0% 0%, 0% 100%, from(#738ABA), to(#2C4987));border-bottom:1px solid;border-color:#1d4088;color:#fff;font:14px Helvetica, sans-serif;font-weight:bold;text-overflow:ellipsis;text-shadow:rgba(0, 30, 84, .296875) 0 -1px 0;vertical-align:middle;white-space:nowrap}.fb_dialog_content .dialog_header table{-webkit-font-smoothing:subpixel-antialiased;height:43px;width:100%}.fb_dialog_content .dialog_header td.header_left{font-size:12px;padding-left:5px;vertical-align:middle;width:60px}.fb_dialog_content .dialog_header td.header_right{font-size:12px;padding-right:5px;vertical-align:middle;width:60px}.fb_dialog_content .touchable_button{background:-webkit-gradient(linear, 0% 0%, 0% 100%, from(#4966A6), color-stop(.5, #355492), to(#2A4887));border:1px solid #29487d;-webkit-background-clip:padding-box;-webkit-border-radius:3px;-webkit-box-shadow:rgba(0, 0, 0, .117188) 0 1px 1px inset, rgba(255, 255, 255, .167969) 0 1px 0;display:inline-block;margin-top:3px;max-width:85px;line-height:18px;padding:4px 12px;position:relative}.fb_dialog_content .dialog_header .touchable_button input{border:none;background:none;color:#fff;font:12px Helvetica, sans-serif;font-weight:bold;margin:2px -12px;padding:2px 6px 3px 6px;text-shadow:rgba(0, 30, 84, .296875) 0 -1px 0}.fb_dialog_content .dialog_header .header_center{color:#fff;font-size:16px;font-weight:bold;line-height:18px;text-align:center;vertical-align:middle}.fb_dialog_content .dialog_content{background:url(https://static.xx.fbcdn.net/rsrc.php/v2/y9/r/jKEcVPZFk-2.gif) no-repeat 50% 50%;border:1px solid #555;border-bottom:0;border-top:0;height:150px}.fb_dialog_content .dialog_footer{background:#f6f7f9;border:1px solid #555;border-top-color:#ccc;height:40px}#fb_dialog_loader_close{float:left}.fb_dialog.fb_dialog_mobile .fb_dialog_close_button{text-shadow:rgba(0, 30, 84, .296875) 0 -1px 0}.fb_dialog.fb_dialog_mobile .fb_dialog_close_icon{visibility:hidden}#fb_dialog_loader_spinner{animation:rotateSpinner 1.2s linear infinite;background-color:transparent;background-image:url(https://static.xx.fbcdn.net/rsrc.php/v2/yD/r/t-wz8gw1xG1.png);background-repeat:no-repeat;background-position:50% 50%;height:24px;width:24px}@keyframes rotateSpinner{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}
.fb_iframe_widget{display:inline-block;position:relative}.fb_iframe_widget span{display:inline-block;position:relative;text-align:justify}.fb_iframe_widget iframe{position:absolute}.fb_iframe_widget_fluid_desktop,.fb_iframe_widget_fluid_desktop span,.fb_iframe_widget_fluid_desktop iframe{max-width:100%}.fb_iframe_widget_fluid_desktop iframe{min-width:220px;position:relative}.fb_iframe_widget_lift{z-index:1}.fb_hide_iframes iframe{position:relative;left:-10000px}.fb_iframe_widget_loader{position:relative;display:inline-block}.fb_iframe_widget_fluid{display:inline}.fb_iframe_widget_fluid span{width:100%}.fb_iframe_widget_loader iframe{min-height:32px;z-index:2;zoom:1}.fb_iframe_widget_loader .FB_Loader{background:url(https://static.xx.fbcdn.net/rsrc.php/v2/y9/r/jKEcVPZFk-2.gif) no-repeat;height:32px;width:32px;margin-left:-16px;position:absolute;left:50%;z-index:4}</style></head>
  <body>
    <div id="wrap">
      <header role="banner">
        <nav class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="https://realpython.com/">
            <img src="./Primer on Python Decorators - Real Python_files/python-xxl.png" class="test" style="padding-bottom: 5px;">
            Real Python
          </a>
        </div>

        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li>
              <a href="https://realpython.com/">Home</a>
            </li>
            <li>
              <a href="https://realpython.com/courses">Courses</a>
            </li>
            <li class="active">
              <a href="https://realpython.com/blog">Blog</a>
            </li>
           <li class="dropdown">
              <a href="https://realpython.com/blog/python/primer-on-python-decorators/#" class="dropdown-toggle" data-toggle="dropdown">More <span class="caret"></span></a>
              <ul class="dropdown-menu" role="menu">
                <li><a href="https://realpython.com/mentoring">Mentoring</a></li>
                <li><a href="https://realpython.com/resources">Resources</a></li>
                <li><a href="https://realpython.com/questions">FAQ</a></li>
                <li><a href="https://realpython.com/write">Write For Us</a></li>
                <li><a href="https://realpython.com/promo">Promo</a></li>
<!--                 <li class="divider nav-divider"></li> -->
                <li><a href="https://github.com/realpython/support" target="_blank">Support</a></li>
<!--                 <li><a href="/forum">Forum</a></li> -->
              </ul>
            </li>
          </ul>

          <div class="nav navbar-nav navbar-right hidden-xs">
            <a href="https://www.facebook.com/LearnRealPython" title="Facebook" target="_blank">
              <i class="fa fa-facebook-square fa-4"></i>
            </a>
            <a href="https://twitter.com/RealPython" title="Twitter" target="_blank">
              <i class="fa fa-twitter-square fa-4"></i>
            </a>
            <a href="https://github.com/RealPython" title="Github" target="_blank">
              <i class="fa fa-github-square fa-4"></i>
            </a>
          </div>

          <div class="nav navbar-nav navbar-right visible-xs-block">
            <li>
              <a href="https://www.facebook.com/LearnRealPython">Facebook</a>
            </li>
            <li>
              <a href="https://twitter.com/RealPython">Twitter</a>
            </li>
            <li>
              <a href="https://github.com/RealPython">Github</a>
            </li>
          </div>
<!--             <ul class="nav navbar-nav navbar-right hidden-phone">
                <li>
                    <a href="https://twitter.com/RealPython" title="Twitter" rel="nofollow" target="_blank">
                        <i class="fa fa-twitter-square fa-lg"></i>
                    </a>
                </li>
                <li>
                    <a href="https://www.facebook.com/LearnRealPython" title="Facebook" rel="nofollow" target="_blank">
                        <i class="fa fa-facebook-square fa-lg"></i>
                    </a>
                </li>
                <li>
                    <a href="https://github.com/RealPython" title="Github" rel="nofollow" target="_blank">
                        <i class="fa fa-github-square fa-lg"></i>
                    </a>
                </li>
                <li>
                    <a class="subscribe-rss" href="/atom.xml" title="subscribe via RSS">
                        <span class="visible-xs">RSS</span>
                        <img class="hidden-xs" src="/images/rss.png" alt="RSS">
                    </a>
                </li>
                
            </ul> -->
        </div>
    </div>
</nav>


      </header>
      <div id="main" class="container">
        <div id="content">
          <div class="row">
  <div class="page-content col-md-9">
    <article class="hentry" role="article">
      
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2014-02-05T08:43:57-07:00" pubdate="" data-updated="true">Feb 5<sup>th</sup>, 2014</time>
        
           | <a href="https://realpython.com/blog/python/primer-on-python-decorators/#disqus_thread" data-disqus-identifier="https://realpython.com">Comments</a>
        
      </p>
    
    
    <h1 class="entry-title">
        Primer on Python Decorators
        
    </h1>
    
  </header>


<div class="entry-content clearfix"><p><strong>In this introductory tutorial, we’ll look at what decorators are and how to create and use them.</strong> Decorators provide a simple syntax for calling <a href="http://en.wikipedia.org/wiki/Higher-order_function">higher-order functions</a>. By definition, a decorator is a function that takes another function and extends the behavior of the latter function <em>without</em> explicitly modifying it. Sounds confusing – but it’s really not, especially after we go over a number of examples.</p>

<div class="center-text">
  <img class="no-border" src="./Primer on Python Decorators - Real Python_files/decorators.png" style="max-width: 100%;" alt="python decorators">
</div>




<br>


<blockquote><p>You can find all the examples from this article <a href="https://github.com/mjhea0/python-decorators">here</a>.</p></blockquote>

<p><strong>Updates:</strong></p>

<ol>
<li><em>01/12/2016:</em> Updated examples to Python 3 (v3.5.1) syntax and added a new example.</li>
<li><em>11/01/2015:</em> Added a brief explanation on the <code>functools.wraps()</code> decorator.</li>
</ol>


<a name="Functions"></a>
<h2 id="functions">Functions</h2>

<p>Before you can understand decorators, you must first understand how functions work. Essentially, <strong>functions return a value based on the given arguments</strong>.</p>

<figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
</pre></td><td class="code"><pre><code class="python"><span class="line"><span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="n">bar</span><span class="p">):</span>
</span><span class="line">    <span class="k">return</span> <span class="n">bar</span> <span class="o">+</span> <span class="mi">1</span>
</span><span class="line">
</span><span class="line">
</span><span class="line"><span class="k">print</span><span class="p">(</span><span class="n">foo</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">)</span>
</span></code></pre></td></tr></tbody></table></div></figure>


<a name="First.Class.Objects"></a>
<h3>First Class Objects</h3>

<p>In Python, functions are <strong><a href="http://python-history.blogspot.com/2009/02/first-class-everything.html">first-class</a> objects</strong>. This means that functions can be passed around, and used as arguments, just like any other value (e.g, string, int, float).</p>

<figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
</pre></td><td class="code"><pre><code class="python"><span class="line"><span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="n">bar</span><span class="p">):</span>
</span><span class="line">    <span class="k">return</span> <span class="n">bar</span> <span class="o">+</span> <span class="mi">1</span>
</span><span class="line">
</span><span class="line"><span class="k">print</span><span class="p">(</span><span class="n">foo</span><span class="p">)</span>
</span><span class="line"><span class="k">print</span><span class="p">(</span><span class="n">foo</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
</span><span class="line"><span class="k">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">foo</span><span class="p">))</span>
</span><span class="line">
</span><span class="line">
</span><span class="line"><span class="k">def</span> <span class="nf">call_foo_with_arg</span><span class="p">(</span><span class="n">foo</span><span class="p">,</span> <span class="n">arg</span><span class="p">):</span>
</span><span class="line">    <span class="k">return</span> <span class="n">foo</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
</span><span class="line">
</span><span class="line"><span class="k">print</span><span class="p">(</span><span class="n">call_foo_with_arg</span><span class="p">(</span><span class="n">foo</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
</span></code></pre></td></tr></tbody></table></div></figure>


<a name="Nested.Functions"></a>
<h3>Nested Functions</h3>

<p>Because of the first-class nature of functions in Python, you can <strong>define functions inside other functions</strong>. Such functions are called nested functions.</p>

<figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
</pre></td><td class="code"><pre><code class="python"><span class="line"><span class="k">def</span> <span class="nf">parent</span><span class="p">():</span>
</span><span class="line">    <span class="k">print</span><span class="p">(</span><span class="s">"Printing from the parent() function."</span><span class="p">)</span>
</span><span class="line">
</span><span class="line">    <span class="k">def</span> <span class="nf">first_child</span><span class="p">():</span>
</span><span class="line">        <span class="k">return</span> <span class="s">"Printing from the first_child() function."</span>
</span><span class="line">
</span><span class="line">    <span class="k">def</span> <span class="nf">second_child</span><span class="p">():</span>
</span><span class="line">        <span class="k">return</span> <span class="s">"Printing from the second_child() function."</span>
</span><span class="line">
</span><span class="line">    <span class="k">print</span><span class="p">(</span><span class="n">first_child</span><span class="p">())</span>
</span><span class="line">    <span class="k">print</span><span class="p">(</span><span class="n">second_child</span><span class="p">())</span>
</span></code></pre></td></tr></tbody></table></div></figure>


<p>What happens when you call the <code>parent()</code> function? Think about this for a minute. You should get…</p>

<figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="sh"><span class="line">Printing from the parent<span class="o">()</span> <span class="k">function</span>.
</span><span class="line">Printing from the first_child<span class="o">()</span> <span class="k">function</span>.
</span><span class="line">Printing from the second_child<span class="o">()</span> <span class="k">function</span>
</span></code></pre></td></tr></tbody></table></div></figure>


<p>Try calling the <code>first_child()</code>. You should get an error:</p>

<figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
</pre></td><td class="code"><pre><code class="sh"><span class="line">Traceback <span class="o">(</span>most recent call last<span class="o">)</span>:
</span><span class="line">File <span class="s2">"decorator03.py"</span>, line 15, in &lt;module&gt;
</span><span class="line">first_child<span class="o">()</span>
</span><span class="line">NameError: name <span class="s1">'first_child'</span> is not defined
</span></code></pre></td></tr></tbody></table></div></figure>


<p><strong>What have we learned?</strong></p>

<p>Whenever you call <code>parent()</code>, the sibling functions, <code>first_child()</code> and <code>second_child()</code> are also called <em>AND</em>
because of scope, both of the sibling functions are not available (e.g., cannot be called) outside of the parent function.</p>

<a name="Returning.Functions"></a>
<h3>Returning Functions</h3>

<p>Python also allows you to <strong>return functions from other functions</strong>. Let’s alter the previous function for this example.</p>

<figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
</pre></td><td class="code"><pre><code class="python"><span class="line"><span class="k">def</span> <span class="nf">parent</span><span class="p">(</span><span class="n">num</span><span class="p">):</span>
</span><span class="line">
</span><span class="line">    <span class="k">def</span> <span class="nf">first_child</span><span class="p">():</span>
</span><span class="line">        <span class="k">return</span> <span class="s">"Printing from the first_child() function."</span>
</span><span class="line">
</span><span class="line">    <span class="k">def</span> <span class="nf">second_child</span><span class="p">():</span>
</span><span class="line">        <span class="k">return</span> <span class="s">"Printing from the second_child() function."</span>
</span><span class="line">
</span><span class="line">    <span class="k">try</span><span class="p">:</span>
</span><span class="line">        <span class="k">assert</span> <span class="n">num</span> <span class="o">==</span> <span class="mi">10</span>
</span><span class="line">        <span class="k">return</span> <span class="n">first_child</span>
</span><span class="line">    <span class="k">except</span> <span class="ne">AssertionError</span><span class="p">:</span>
</span><span class="line">        <span class="k">return</span> <span class="n">second_child</span>
</span><span class="line">
</span><span class="line"><span class="n">foo</span> <span class="o">=</span> <span class="n">parent</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</span><span class="line"><span class="n">bar</span> <span class="o">=</span> <span class="n">parent</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span>
</span><span class="line">
</span><span class="line"><span class="k">print</span><span class="p">(</span><span class="n">foo</span><span class="p">)</span>
</span><span class="line"><span class="k">print</span><span class="p">(</span><span class="n">bar</span><span class="p">)</span>
</span><span class="line">
</span><span class="line"><span class="k">print</span><span class="p">(</span><span class="n">foo</span><span class="p">())</span>
</span><span class="line"><span class="k">print</span><span class="p">(</span><span class="n">bar</span><span class="p">())</span>
</span></code></pre></td></tr></tbody></table></div></figure>


<p>The output of the first two print statements is:</p>

<figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="sh"><span class="line">&lt;<span class="k">function </span>first_child at 0x1004a8c08&gt;
</span><span class="line">&lt;<span class="k">function </span>second_child at 0x1004a8cf8&gt;
</span></code></pre></td></tr></tbody></table></div></figure>


<p>This simply means that <code>foo</code> points to the <code>first_child()</code> function, while <code>bar</code> points to the <code>second_child()</code> function.</p>

<p>The output of the second two functions confirms this:</p>

<figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="sh"><span class="line">Printing from the first_child<span class="o">()</span> <span class="k">function</span>.
</span><span class="line">Printing from the second_child<span class="o">()</span> <span class="k">function</span>.
</span></code></pre></td></tr></tbody></table></div></figure>


<p>Finally, did you notice that in example three, we executed the sibling functions within the parent functions – e.g, <code>second_child()</code>. Meanwhile in this last example, we did not add parenthesis to the sibling functions – <code>first_child</code> – when called so that way we can use them in the future. Make sense?</p>

<p>Now, my friend, you are ready to take on decorators!</p>

<a name="Decorators"></a>
<h2 id="decorators">Decorators</h2>

<p>Let’s look at two examples …</p>

<a name="Example.1:"></a>
<h3>Example 1:</h3>

<figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
</pre></td><td class="code"><pre><code class="python"><span class="line"><span class="k">def</span> <span class="nf">my_decorator</span><span class="p">(</span><span class="n">some_function</span><span class="p">):</span>
</span><span class="line">
</span><span class="line">    <span class="k">def</span> <span class="nf">wrapper</span><span class="p">():</span>
</span><span class="line">
</span><span class="line">        <span class="k">print</span><span class="p">(</span><span class="s">"Something is happening before some_function() is called."</span><span class="p">)</span>
</span><span class="line">
</span><span class="line">        <span class="n">some_function</span><span class="p">()</span>
</span><span class="line">
</span><span class="line">        <span class="k">print</span><span class="p">(</span><span class="s">"Something is happening after some_function() is called."</span><span class="p">)</span>
</span><span class="line">
</span><span class="line">    <span class="k">return</span> <span class="n">wrapper</span>
</span><span class="line">
</span><span class="line">
</span><span class="line"><span class="k">def</span> <span class="nf">just_some_function</span><span class="p">():</span>
</span><span class="line">    <span class="k">print</span><span class="p">(</span><span class="s">"Wheee!"</span><span class="p">)</span>
</span><span class="line">
</span><span class="line">
</span><span class="line"><span class="n">just_some_function</span> <span class="o">=</span> <span class="n">my_decorator</span><span class="p">(</span><span class="n">just_some_function</span><span class="p">)</span>
</span><span class="line">
</span><span class="line"><span class="n">just_some_function</span><span class="p">()</span>
</span></code></pre></td></tr></tbody></table></div></figure>


<p>Can you guess what the output will be? Try.</p>

<figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="sh"><span class="line">Something is happening before some_function<span class="o">()</span> is called.
</span><span class="line">Wheee!
</span><span class="line">Something is happening after some_function<span class="o">()</span> is called.
</span></code></pre></td></tr></tbody></table></div></figure>


<p>To understand what’s going on here, just look back at the four previous examples. We are literally just applying everything learned. <strong>Put simply, decorators wrap a function, modifying its behavior.</strong></p>

<p>Let’s take it one step further and add an if statement.</p>

<a name="Example.2:"></a>
<h3>Example 2:</h3>

<figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
</pre></td><td class="code"><pre><code class="python"><span class="line"><span class="k">def</span> <span class="nf">my_decorator</span><span class="p">(</span><span class="n">some_function</span><span class="p">):</span>
</span><span class="line">
</span><span class="line">    <span class="k">def</span> <span class="nf">wrapper</span><span class="p">():</span>
</span><span class="line">
</span><span class="line">        <span class="n">num</span> <span class="o">=</span> <span class="mi">10</span>
</span><span class="line">
</span><span class="line">        <span class="k">if</span> <span class="n">num</span> <span class="o">==</span> <span class="mi">10</span><span class="p">:</span>
</span><span class="line">            <span class="k">print</span><span class="p">(</span><span class="s">"Yes!"</span><span class="p">)</span>
</span><span class="line">        <span class="k">else</span><span class="p">:</span>
</span><span class="line">            <span class="k">print</span><span class="p">(</span><span class="s">"No!"</span><span class="p">)</span>
</span><span class="line">
</span><span class="line">        <span class="n">some_function</span><span class="p">()</span>
</span><span class="line">
</span><span class="line">        <span class="k">print</span><span class="p">(</span><span class="s">"Something is happening after some_function() is called."</span><span class="p">)</span>
</span><span class="line">
</span><span class="line">    <span class="k">return</span> <span class="n">wrapper</span>
</span><span class="line">
</span><span class="line">
</span><span class="line"><span class="k">def</span> <span class="nf">just_some_function</span><span class="p">():</span>
</span><span class="line">    <span class="k">print</span><span class="p">(</span><span class="s">"Wheee!"</span><span class="p">)</span>
</span><span class="line">
</span><span class="line"><span class="n">just_some_function</span> <span class="o">=</span> <span class="n">my_decorator</span><span class="p">(</span><span class="n">just_some_function</span><span class="p">)</span>
</span><span class="line">
</span><span class="line"><span class="n">just_some_function</span><span class="p">()</span>
</span></code></pre></td></tr></tbody></table></div></figure>


<p>This will output in:</p>

<figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="sh"><span class="line">Yes!
</span><span class="line">Wheee!
</span><span class="line">Something is happening after some_function<span class="o">()</span> is called.
</span></code></pre></td></tr></tbody></table></div></figure>


<a name="Syntactic.sugar."></a>
<h2 id="syntactic-sugar">Syntactic sugar!</h2>

<p>Python allows you to simplify the calling of decorators using the <code>@</code> symbol (this is called “pie” syntax).</p>

<a name="Let.s.create.a.module.for.our.decorator:"></a>
<h3>Let’s create a module for our decorator:</h3>

<figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
</pre></td><td class="code"><pre><code class="python"><span class="line"><span class="k">def</span> <span class="nf">my_decorator</span><span class="p">(</span><span class="n">some_function</span><span class="p">):</span>
</span><span class="line">
</span><span class="line">    <span class="k">def</span> <span class="nf">wrapper</span><span class="p">():</span>
</span><span class="line">
</span><span class="line">        <span class="n">num</span> <span class="o">=</span> <span class="mi">10</span>
</span><span class="line">
</span><span class="line">        <span class="k">if</span> <span class="n">num</span> <span class="o">==</span> <span class="mi">10</span><span class="p">:</span>
</span><span class="line">            <span class="k">print</span><span class="p">(</span><span class="s">"Yes!"</span><span class="p">)</span>
</span><span class="line">        <span class="k">else</span><span class="p">:</span>
</span><span class="line">            <span class="k">print</span><span class="p">(</span><span class="s">"No!"</span><span class="p">)</span>
</span><span class="line">
</span><span class="line">        <span class="n">some_function</span><span class="p">()</span>
</span><span class="line">
</span><span class="line">        <span class="k">print</span><span class="p">(</span><span class="s">"Something is happening after some_function() is called."</span><span class="p">)</span>
</span><span class="line">
</span><span class="line">    <span class="k">return</span> <span class="n">wrapper</span>
</span><span class="line">
</span><span class="line">
</span><span class="line"><span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">"__main__"</span><span class="p">:</span>
</span><span class="line">    <span class="n">my_decorator</span><span class="p">()</span>
</span></code></pre></td></tr></tbody></table></div></figure>


<p>Okay. Stay with me. Let’s look at how to call the function with the decorator:</p>

<figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
</pre></td><td class="code"><pre><code class="python"><span class="line"><span class="kn">from</span> <span class="nn">decorator07</span> <span class="kn">import</span> <span class="n">my_decorator</span>
</span><span class="line">
</span><span class="line">
</span><span class="line"><span class="nd">@my_decorator</span>
</span><span class="line"><span class="k">def</span> <span class="nf">just_some_function</span><span class="p">():</span>
</span><span class="line">    <span class="k">print</span><span class="p">(</span><span class="s">"Wheee!"</span><span class="p">)</span>
</span><span class="line">
</span><span class="line"><span class="n">just_some_function</span><span class="p">()</span>
</span></code></pre></td></tr></tbody></table></div></figure>


<p>When you run this example, you should get the same output as in the previous one:</p>

<figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="sh"><span class="line">Yes!
</span><span class="line">Wheee!
</span><span class="line">Something is happening after some_function<span class="o">()</span> is called.
</span></code></pre></td></tr></tbody></table></div></figure>


<p>So, <code>@my_decorator</code> is just an easier way of saying <code>just_some_function = my_decorator(just_some_function)</code>. It’s how you apply a decorator to a function.</p>

<a name="Real.World.Examples"></a>
<h2 id="real-world-examples">Real World Examples</h2>

<p>How about a few real world examples …</p>

<figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
<span class="line-number">26</span>
<span class="line-number">27</span>
</pre></td><td class="code"><pre><code class="python"><span class="line"><span class="kn">import</span> <span class="nn">time</span>
</span><span class="line">
</span><span class="line">
</span><span class="line"><span class="k">def</span> <span class="nf">timing_function</span><span class="p">(</span><span class="n">some_function</span><span class="p">):</span>
</span><span class="line">
</span><span class="line">    <span class="sd">"""</span>
</span><span class="line"><span class="sd">    Outputs the time a function takes</span>
</span><span class="line"><span class="sd">    to execute.</span>
</span><span class="line"><span class="sd">    """</span>
</span><span class="line">
</span><span class="line">    <span class="k">def</span> <span class="nf">wrapper</span><span class="p">():</span>
</span><span class="line">        <span class="n">t1</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
</span><span class="line">        <span class="n">some_function</span><span class="p">()</span>
</span><span class="line">        <span class="n">t2</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
</span><span class="line">        <span class="k">return</span> <span class="s">"Time it took to run the function: "</span> <span class="o">+</span> <span class="nb">str</span><span class="p">((</span><span class="n">t2</span> <span class="o">-</span> <span class="n">t1</span><span class="p">))</span> <span class="o">+</span> <span class="s">"</span><span class="se">\n</span><span class="s">"</span>
</span><span class="line">    <span class="k">return</span> <span class="n">wrapper</span>
</span><span class="line">
</span><span class="line">
</span><span class="line"><span class="nd">@timing_function</span>
</span><span class="line"><span class="k">def</span> <span class="nf">my_function</span><span class="p">():</span>
</span><span class="line">    <span class="n">num_list</span> <span class="o">=</span> <span class="p">[]</span>
</span><span class="line">    <span class="k">for</span> <span class="n">num</span> <span class="ow">in</span> <span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10000</span><span class="p">)):</span>
</span><span class="line">        <span class="n">num_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">num</span><span class="p">)</span>
</span><span class="line">    <span class="k">print</span><span class="p">(</span><span class="s">"</span><span class="se">\n</span><span class="s">Sum of all the numbers: "</span> <span class="o">+</span> <span class="nb">str</span><span class="p">((</span><span class="nb">sum</span><span class="p">(</span><span class="n">num_list</span><span class="p">))))</span>
</span><span class="line">
</span><span class="line">
</span><span class="line"><span class="k">print</span><span class="p">(</span><span class="n">my_function</span><span class="p">())</span>
</span></code></pre></td></tr></tbody></table></div></figure>


<p>This returns the time before you run <code>my_function()</code> as well as the time after. Then we simply subtract the two to see how long it took to run the function.</p>

<p>Run it. Work through the code, line by line. Make sure you understand how it works.</p>

<figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
</pre></td><td class="code"><pre><code class="python"><span class="line"><span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">sleep</span>
</span><span class="line">
</span><span class="line">
</span><span class="line"><span class="k">def</span> <span class="nf">sleep_decorator</span><span class="p">(</span><span class="n">function</span><span class="p">):</span>
</span><span class="line">
</span><span class="line">    <span class="sd">"""</span>
</span><span class="line"><span class="sd">    Limits how fast the function is</span>
</span><span class="line"><span class="sd">    called.</span>
</span><span class="line"><span class="sd">    """</span>
</span><span class="line">
</span><span class="line">    <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span class="line">        <span class="n">sleep</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</span><span class="line">        <span class="k">return</span> <span class="n">function</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span class="line">    <span class="k">return</span> <span class="n">wrapper</span>
</span><span class="line">
</span><span class="line">
</span><span class="line"><span class="nd">@sleep_decorator</span>
</span><span class="line"><span class="k">def</span> <span class="nf">print_number</span><span class="p">(</span><span class="n">num</span><span class="p">):</span>
</span><span class="line">    <span class="k">return</span> <span class="n">num</span>
</span><span class="line">
</span><span class="line"><span class="k">print</span><span class="p">(</span><span class="n">print_number</span><span class="p">(</span><span class="mi">222</span><span class="p">))</span>
</span><span class="line">
</span><span class="line"><span class="k">for</span> <span class="n">num</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">):</span>
</span><span class="line">    <span class="k">print</span><span class="p">(</span><span class="n">print_number</span><span class="p">(</span><span class="n">num</span><span class="p">))</span>
</span></code></pre></td></tr></tbody></table></div></figure>


<p>This decorator is used for rate limiting. Test it out.</p>

<p>One of the most used decorators in Python is the <code>login_required()</code> decorator, which ensures that a user is logged in/properly authenticated before s/he can access a specific route (<code>/secret</code>, in this case):</p>

<figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
</pre></td><td class="code"><pre><code class="python"><span class="line"><span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">wraps</span>
</span><span class="line"><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">g</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">redirect</span><span class="p">,</span> <span class="n">url_for</span>
</span><span class="line">
</span><span class="line">
</span><span class="line"><span class="k">def</span> <span class="nf">login_required</span><span class="p">(</span><span class="n">f</span><span class="p">):</span>
</span><span class="line">    <span class="nd">@wraps</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
</span><span class="line">    <span class="k">def</span> <span class="nf">decorated_function</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span class="line">        <span class="k">if</span> <span class="n">g</span><span class="o">.</span><span class="n">user</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
</span><span class="line">            <span class="k">return</span> <span class="n">redirect</span><span class="p">(</span><span class="n">url_for</span><span class="p">(</span><span class="s">'login'</span><span class="p">,</span> <span class="nb">next</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">url</span><span class="p">))</span>
</span><span class="line">        <span class="k">return</span> <span class="n">f</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span class="line">    <span class="k">return</span> <span class="n">decorated_function</span>
</span><span class="line">
</span><span class="line">
</span><span class="line"><span class="nd">@app.route</span><span class="p">(</span><span class="s">'/secret'</span><span class="p">)</span>
</span><span class="line"><span class="nd">@login_required</span>
</span><span class="line"><span class="k">def</span> <span class="nf">secret</span><span class="p">():</span>
</span><span class="line">    <span class="k">pass</span>
</span></code></pre></td></tr></tbody></table></div></figure>


<p>Did you notice that the function gets passed to the <code>functools.wraps()</code> <a href="https://docs.python.org/3.5/library/functools.html#functools.wraps">decorator</a>? This simply <a href="http://stackoverflow.com/questions/308999/what-does-functools-wraps-do">preserves</a> the metadata of the wrapped function.</p>

<p>Let’s look at one last use case. Take a quick look at the following <a href="http://flask.pocoo.org/docs/0.10/">Flask</a> route handler:</p>

<figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
</pre></td><td class="code"><pre><code class="python"><span class="line"><span class="nd">@app.route</span><span class="p">(</span><span class="s">'/grade'</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s">'POST'</span><span class="p">])</span>
</span><span class="line"><span class="k">def</span> <span class="nf">update_grade</span><span class="p">():</span>
</span><span class="line">    <span class="n">json_data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">get_json</span><span class="p">()</span>
</span><span class="line">    <span class="k">if</span> <span class="s">'student_id'</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">json_data</span><span class="p">:</span>
</span><span class="line">        <span class="n">abort</span><span class="p">(</span><span class="mi">400</span><span class="p">)</span>
</span><span class="line">    <span class="c"># update database</span>
</span><span class="line">    <span class="k">return</span> <span class="s">"success!"</span>
</span></code></pre></td></tr></tbody></table></div></figure>


<p>Here we ensure that the key <code>student_id</code> is part of the request. Although this validation works it really does not belong in the function itself. Plus, perhaps there are other routes that use the exact same validation. So, let’s keep it DRY and abstract out any unnecessary logic with a decorator.</p>

<figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
</pre></td><td class="code"><pre><code class="python"><span class="line"><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">abort</span>
</span><span class="line"><span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">wraps</span>
</span><span class="line">
</span><span class="line"><span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="n">__name__</span><span class="p">)</span>
</span><span class="line">
</span><span class="line">
</span><span class="line"><span class="k">def</span> <span class="nf">validate_json</span><span class="p">(</span><span class="o">*</span><span class="n">expected_args</span><span class="p">):</span>
</span><span class="line">    <span class="k">def</span> <span class="nf">decorator</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
</span><span class="line">        <span class="nd">@wraps</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
</span><span class="line">        <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span class="line">            <span class="n">json_object</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">get_json</span><span class="p">()</span>
</span><span class="line">            <span class="k">for</span> <span class="n">expected_arg</span> <span class="ow">in</span> <span class="n">expected_args</span><span class="p">:</span>
</span><span class="line">                <span class="k">if</span> <span class="n">expected_arg</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">json_object</span><span class="p">:</span>
</span><span class="line">                    <span class="n">abort</span><span class="p">(</span><span class="mi">400</span><span class="p">)</span>
</span><span class="line">            <span class="k">return</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span class="line">        <span class="k">return</span> <span class="n">wrapper</span>
</span><span class="line">    <span class="k">return</span> <span class="n">decorator</span>
</span><span class="line">
</span><span class="line"><span class="nd">@app.route</span><span class="p">(</span><span class="s">'/grade'</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s">'POST'</span><span class="p">])</span>
</span><span class="line"><span class="nd">@validate_json</span><span class="p">(</span><span class="s">'student_id'</span><span class="p">)</span>
</span><span class="line"><span class="k">def</span> <span class="nf">update_grade</span><span class="p">():</span>
</span><span class="line">    <span class="n">json_data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">get_json</span><span class="p">()</span>
</span><span class="line">    <span class="k">print</span><span class="p">(</span><span class="n">json_data</span><span class="p">)</span>
</span><span class="line">    <span class="c"># update database</span>
</span><span class="line">    <span class="k">return</span> <span class="s">"success!"</span>
</span></code></pre></td></tr></tbody></table></div></figure>


<p>In the above code, the decorator takes a variable length list as an argument so that we can pass in as many string arguments as necessary, each representing a key used to validate the JSON data. Did you notice that this dynamically creates new decorators based on those strings? <a href="https://github.com/mjhea0/python-decorators/tree/master/flask-app">Test this out</a>.</p>

<p><strong>Cheers!</strong></p>
</div>


      <footer>
        <p class="meta text-muted">
          
  

<span class="glyphicon glyphicon-user"></span> <span class="byline author vcard">Posted by <span class="fn">Real Python</span></span>

          












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2014-02-05T08:43:57-07:00" pubdate="" data-updated="true">Feb 5<sup>th</sup>, 2014</time>
          

<span class="glyphicon glyphicon-tags"></span>&nbsp;
<span class="categories">
  
    <a class="category" href="https://realpython.com/blog/categories/fundamentals/">fundamentals</a>, <a class="category" href="https://realpython.com/blog/categories/python/">python</a>
  
</span>


        </p>
        
          <div class="sharing">
<!--   
  <a href="//twitter.com/share" class="twitter-share-button" data-url="https://realpython.com/blog/python/primer-on-python-decorators/" data-via="RealPython" data-counturl="https://realpython.com/blog/python/primer-on-python-decorators/" >Tweet</a>
  
  <br>
  
  <div class="g-plusone" data-size="medium"></div>
  
  <br>
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>
   -->

  <!-- Go to www.addthis.com/dashboard to customize your tools -->
  <div class="addthis_native_toolbox"></div>
  <script type="text/javascript" src="https://s7.addthis.com/js/300/addthis_widget.js#pubid=ra-50e5f1cc35ad077d"></script>

<!-- Go to www.addthis.com/dashboard to customize your tools -->
<script type="text/javascript" src="https://s7.addthis.com/js/300/addthis_widget.js#pubid=ra-50e5f1cc35ad077d"></script>
</div>
        
        <br>
        <p><strong>See an error in this post? Please submit a pull request on <a href="https://github.com/realpython/realpython-blog">Github</a>.</strong></p>
        <hr>
        <!-- download button -->
        <div class="center-text">
          <h4 style="font-weight: bold;">Want to learn more? Download the Real Python course.</h4>
          <p class="action">
            <script type="text/javascript" src="./Primer on Python Decorators - Real Python_files/embed(1).js"></script><a href="https://app.simplegoods.co/i/IQCZADOY" class="btn btn-success btn-lg">Download Now » $60</a>
          </p>
          <p>Or, click <a href="http://www.realpython.com/">here</a> to learn more about the course.</p>
        </div>
        <div class="center-text">
          <hr>
          
            <ul class="meta text-muted pager">
              
              <li class="previous"><a href="https://realpython.com/blog/python/python-web-applications-with-flask-part-iii/" title="Previous Post: Python Web Applications With Flask - Part III">« Python Web Applications With Flask - Part III</a></li>
              
              
              <li class="next"><a href="https://realpython.com/blog/python/primer-on-jinja-templating/" title="Next Post: Primer on Jinja Templating">Primer on Jinja Templating »</a></li>
              
            </ul>
          
        </div>
      </footer>
    </article>
    
      <section>
        <h1>Comments</h1>
        <div id="disqus_thread" aria-live="polite"><iframe id="dsq-app2" name="dsq-app2" allowtransparency="true" frameborder="0" scrolling="no" tabindex="0" title="Disqus" width="100%" src="./Primer on Python Decorators - Real Python_files/saved_resource.html" style="width: 1px !important; min-width: 100% !important; border: none !important; overflow: hidden !important; height: 4855px !important;" horizontalscrolling="no" verticalscrolling="no"></iframe></div>
      </section>
    
  </div>

  
    <div class="side-header">
      <aside class="sidebar col-md-3">
        
          <!-- <script>
    $().ready(function() {
        var $scrollingDiv = $("#tocBlock");
        console.log("We're scolling!")
        $(window).scroll(function(){
            $scrollingDiv
                .stop()
                .animate({"marginTop": ($(window).scrollTop() + 0) + "px"}, "slow" );
        });
    });
</script> -->




<h4>Categories</h4>
<ul id="category">
  
  
    
      <li><a href="https://realpython.com/blog/categories/analytics/">analytics</a> [ 4 ]</li>
    
  
    
      <li><a href="https://realpython.com/blog/categories/api/">api</a> [ 6 ]</li>
    
  
    
      <li><a href="https://realpython.com/blog/categories/bottle/">bottle</a> [ 2 ]</li>
    
  
    
      <li><a href="https://realpython.com/blog/categories/data-science/">data science</a> [ 8 ]</li>
    
  
    
      <li><a href="https://realpython.com/blog/categories/devops/">devops</a> [ 15 ]</li>
    
  
    
      <li><a href="https://realpython.com/blog/categories/django/">django</a> [ 29 ]</li>
    
  
    
      <li><a href="https://realpython.com/blog/categories/docker/">docker</a> [ 6 ]</li>
    
  
    
      <li><a href="https://realpython.com/blog/categories/editors/">editors</a> [ 3 ]</li>
    
  
    
      <li><a href="https://realpython.com/blog/categories/flask/">flask</a> [ 30 ]</li>
    
  
    
      <li><a href="https://realpython.com/blog/categories/front-end/">front-end</a> [ 10 ]</li>
    
  
    
      <li><a href="https://realpython.com/blog/categories/fundamentals/">fundamentals</a> [ 16 ]</li>
    
  
    
      <li><a href="https://realpython.com/blog/categories/migrations/">migrations</a> [ 3 ]</li>
    
  
    
      <li><a href="https://realpython.com/blog/categories/opencv/">opencv</a> [ 3 ]</li>
    
  
    
      <li><a href="https://realpython.com/blog/categories/pyramid/">pyramid</a> [ 1 ]</li>
    
  
    
  
    
      <li><a href="https://realpython.com/blog/categories/scraping/">scraping</a> [ 2 ]</li>
    
  
    
      <li><a href="https://realpython.com/blog/categories/sql/">sql</a> [ 1 ]</li>
    
  
    
      <li><a href="https://realpython.com/blog/categories/testing/">testing</a> [ 10 ]</li>
    
  
    
      <li><a href="https://realpython.com/blog/categories/web2py/">web2py</a> [ 1 ]</li>
    
  
</ul>


<!-- 
  
 -->


<!-- 
  
 -->



<!-- toc -->
<div id="tocBlock" class="hidden-xs hidden-sm" style="position: static; top: 0px;"><h4 class="tocHeading">Page Contents</h4><ul id="toc"><li>
<a href="https://realpython.com/blog/python/primer-on-python-decorators/#functions">Functions</a>
</li>
<li>
<a href="https://realpython.com/blog/python/primer-on-python-decorators/#decorators">Decorators</a>
</li>
<li>
<a href="https://realpython.com/blog/python/primer-on-python-decorators/#syntactic-sugar">Syntactic sugar!</a>
</li>
<li>
<a href="https://realpython.com/blog/python/primer-on-python-decorators/#real-world-examples">Real World Examples</a>
</li>
</ul></div><div class="side-content"></div>

<!-- 
  <center><img src="http://www.realpython.com/logos/logo-black-small.png"></center>
 -->





        
      </aside>
    </div>
  
</div>

        </div>
      </div>
    </div>
    <footer role="contentinfo"><div class="container">
    


</div>
</footer>
    <script src="./Primer on Python Decorators - Real Python_files/bootstrap.min.js"></script>
<script src="./Primer on Python Decorators - Real Python_files/modernizr-2.0.js"></script>


<script type="text/javascript">
      var disqus_shortname = 'realpython';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'https://realpython.com/blog/python/primer-on-python-decorators/';
        var disqus_url = 'https://realpython.com/blog/python/primer-on-python-decorators/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script + '?https';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>




<div id="fb-root" class=" fb_reset"><div style="position: absolute; top: -10000px; height: 0px; width: 0px;"><div><iframe name="fb_xdm_frame_https" frameborder="0" allowtransparency="true" allowfullscreen="true" scrolling="no" id="fb_xdm_frame_https" aria-hidden="true" title="Facebook Cross Domain Communication Frame" tabindex="-1" src="./Primer on Python Decorators - Real Python_files/bz-D0tzmBsw.html" style="border: none;"></iframe></div></div><div style="position: absolute; top: -10000px; height: 0px; width: 0px;"><div><iframe name="f285c5505d84564" frameborder="0" allowtransparency="true" allowfullscreen="true" scrolling="no" src="./Primer on Python Decorators - Real Python_files/ping.html" style="display: none;"></iframe></div></div></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>







<div class="text-muted credits page-footer">
  <div class="container center-text">
    <p>
      © Copyright 2012-2016 <a href="https://realpython.com/">Real Python</a>.
      <br>
      <small>
        Questions? <a href="mailto:info@realpython.com">info@realpython.com</a>.
        <br><a href="https://realpython.com/blog/python/primer-on-python-decorators/#">Back to top</a>
      </small>
    </p>
<!--     <p>
      <a href="/mentoring">Mentoring</a>&nbsp;&ndash;&nbsp;
      <a href="https://github.com/realpython/support">Support</a>&nbsp;&ndash;&nbsp;
      Forum&nbsp;&ndash;&nbsp;
      <a href="mailto:info@realpython.com">Contact</a>&nbsp;&ndash;&nbsp;
      <a href="https://github.com/realpython/about/blob/master/testimonials.md">Testimonials</a>&nbsp;&ndash;&nbsp;
      <a href="/questions">FAQ</a>&nbsp;&ndash;&nbsp;
      <a href="/promo">Promo</a>
    </p> -->
  </div>
</div>



  

<div id="SGEmbed" style="display: none; visibility: visible !important; z-index: 99999 !important; width: 32px !important; top: 50% !important; position: fixed !important; padding: 25px !important; margin: -26px !important; left: 50% !important; height: 32px !important; border-radius: 3px 3px 3px 3px !important; border: none !important; background: url(&quot;https://app-cdn.simplegoods.co/assets/ajax_loader_sm.gif&quot;) no-repeat scroll center center rgb(255, 255, 255) !important; box-shadow: 0 0 15px rgba(0,0,0,.3) !important;"></div></body></html>